{% extends "base.html" %}
{% block title %}Clients{% endblock %}

{% block content %}
<h1 class="text-2xl font-semibold mb-4">Connected Clients</h1>

<div class="overflow-x-auto">
  <table class="min-w-full divide-y divide-gray-600 border border-gray-600 rounded-lg">
    <thead class="bg-gray-800 text-gray-300 text-sm uppercase">
      <tr>
        <th class="px-4 py-3 text-left">MAC Address</th>
        <th class="px-4 py-3 text-left">IP Address</th>
        <th class="px-4 py-3 text-left">Hostname</th>
        <th class="px-4 py-3 text-left">Reported By</th>
        <th class="px-4 py-3 text-left">Last Seen</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-700 text-sm text-white">
      {% for entry in clients %}
        {% for client in entry.clients %}
        <tr class="hover:bg-gray-800 transition">
          <td class="px-4 py-2 font-mono">{{ client.mac }}</td>
          <td class="px-4 py-2 font-mono">{{ client.ip or "—" }}</td>
          <td class="px-4 py-2">{{ client.hostname or "—" }}</td>
          <td class="px-4 py-2">{{ entry.hostname or entry.mac }}</td>
          <td class="px-4 py-2 text-gray-400">{{ entry.updated_at }}</td>
        </tr>
        {% endfor %}
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block scripts %}
<script>
  setInterval(() => {
    location.reload();
  }, 30000); // elke 30 seconden vernieuwen
</script>
{% endblock %}

